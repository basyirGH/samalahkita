<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <!-- Font Awesome CDN for the search icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Infant:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=DM+Serif+Text:ital@0;1&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
        rel="stylesheet">
    <title>SamalahKita</title>
</head>

<body>

    <!-- header -->
    <header class="header navbar navbar-expand-lg navbar-light bg-light">
        <a class="header-title navbar-brand" href="#">SamalahKita</a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="header-navbar collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#">Keselamatan dan Privasi</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Hubungi Kami</a>
                </li>
            </ul>
        </div>
    </header>


    <!-- infinite scroll -->
    <div class="content-1">
        <br>
        <div class="circumstances">
            <div class="scroll" style="--time:180s">
                <div id="container1A"></div>
                <div id="container1B"></div>
            </div>
            <div class="scroll" style="--time:160s">
                <div id="container2A"></div>
                <div id="container2B"></div>
            </div>
            <div class="scroll" style="--time:240s">
                <div id="container3A"></div>
                <div id="container3B"></div>
            </div>
            <div class="scroll" style="--time:200s">
                <div id="container4A"></div>
                <div id="container4B"></div>
            </div>
        </div>
        <br><br><br>
        <div class="row height d-flex justify-content-center align-items-center">
            <div class="form">
                <i class="fa fa-search"></i>
                <input type="text" class="form-control form-input" id="searchCircumstanceInput">
            </div>
        </div>
        <div class="container mt-2">
            <p class="intro text-center mx-3">
                <!-- Adjust the mx-3 value for the desired left and right margin -->
                Setiap manusia dikurniakan ujian yang unik, tapi tak bermakna kita keseorangan.
                Cari
                atau pilih satu situasi 'real-life' di atas untuk teroka liku-liku
                kehidupan
                mirip anda yang ditempuhi orang lain untuk membantu mencapai matlamat anda,
                mendapatkan ilmu atau pertolongan yang anda perlukan, atau sekadar mengurangkan
                bebanan emosi yang anda hadapi. <br> Tiada pendaftaran diperlukan dan 100% data adalah 'anonymous'.
                #SamalahKita🫂
                <br><br><br><br><br><br><br><br><br>
        </div>
    </div>
    <div class="upper-lines" style="height: 2px; margin-bottom: 20px;"></div>
    <div class="upper-lines" style="height: 4px; margin-bottom: 18px;"></div>
    <div class="upper-lines" style="height: 6px; margin-bottom: 16px;"></div>
    <div class="upper-lines" style="height: 8px; margin-bottom: 14px;"></div>
    <div class="upper-lines" style="height: 10px; margin-bottom: 12px;"></div>
    <div class="upper-lines" style="height: 12px; margin-bottom: 10px;"></div>
    <div class="upper-lines" style="height: 14px; margin-bottom: 8px;"></div>
    <div class="upper-lines" style="height: 16px; margin-bottom: 6px;"></div>
    <div class="upper-lines" style="height: 18px; margin-bottom: 4px;"></div>
    <div class="upper-lines" style="height: 20px; margin-bottom: 2px;"></div>
    <div class="upper-lines" style="height: 22px; margin-bottom: 1px;"></div>
    <div class="content-2">
        <h4 class="research" href="#">Tajuk 1</h4>
    </div>
    <div class="content-3">
        <h4 class="research" href="#">Tajuk 2</h4>
    </div>
    <div class="content-4">
        <h4 class="research" href="#">Tajuk 3</h4>
    </div>
    <div class="content-5">
        <h4 class="research" href="#">Tajuk 4</h4>
    </div>
    <div class="bottom-lines" style="height: 22px; margin-bottom: 1px;"></div>
    <div class="bottom-lines" style="height: 20px; margin-bottom: 2px;"></div>
    <div class="bottom-lines" style="height: 18px; margin-bottom: 4px;"></div>
    <div class="bottom-lines" style="height: 16px; margin-bottom: 6px;"></div>
    <div class="bottom-lines" style="height: 14px; margin-bottom: 8px;"></div>
    <div class="bottom-lines" style="height: 12px; margin-bottom: 10px;"></div>
    <div class="bottom-lines" style="height: 10px; margin-bottom: 12px;"></div>
    <div class="bottom-lines" style="height: 8px; margin-bottom: 14px;"></div>
    <div class="bottom-lines" style="height: 6px; margin-bottom: 16px;"></div>
    <div class="bottom-lines" style="height: 4px; margin-bottom: 18px;"></div>
    <div class="bottom-lines" style="height: 2px; margin-bottom: 20px;"></div>
    <script>
        // Call the function to generate and populate <span> elements
        generateSpans();

        generateAnimatedSearchPlaceholders();

        clickSearch();

        // Function to make the GET request
        async function sendGetRequest(endpoint) {
            try {
                const response = await fetch(endpoint); // Replace with your API endpoint
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        // Function to generate <span> elements and populate them with data
        async function generateSpans() {
            const container1A = document.getElementById('container1A');
            const container1B = document.getElementById('container1B');
            const container2A = document.getElementById('container2A');
            const container2B = document.getElementById('container2B');
            const container3A = document.getElementById('container3A');
            const container3B = document.getElementById('container3B');
            const container4A = document.getElementById('container4A');
            const container4B = document.getElementById('container4B');

            // Fetch data
            const fetchedData = await sendGetRequest("http://localhost:5000/circumstance-level?level=2");

            // Check if data is available
            if (fetchedData) {
                // Iterate over the data and create <span> elements
                for (let i = 0; i < fetchedData.length; i++) {
                    const span = document.createElement('span');
                    span.textContent = fetchedData[i].name; // Replace with the actual property you want to display
                    span.classList.add('circumstance');
                    span.setAttribute('id', fetchedData[i].id);

                    // Append the <span> to the container
                    container1A.appendChild(span.cloneNode(true));
                    container1B.appendChild(span.cloneNode(true));
                    container2A.appendChild(span.cloneNode(true));
                    container2B.appendChild(span.cloneNode(true));
                    container3A.appendChild(span.cloneNode(true));
                    container3B.appendChild(span.cloneNode(true));
                    container4A.appendChild(span.cloneNode(true));
                    container4B.appendChild(span.cloneNode(true));
                }

                var circumstanceElements = document.getElementsByClassName('circumstance');

                // Iterate through the collection and add event listener to each element
                for (var i = 0; i < circumstanceElements.length; i++) {
                    circumstanceElements[i].addEventListener('click', function (event) {
                        // Your click event handling code here
                        console.log("Element clicked:", this.textContent); // Example: Log the text content of the clicked element
                        doClickCircumstanceFromHome(this.id, this.textContent);
                    });
                }
            }
        }

        async function doClickCircumstanceFromHome(id, name) {
            window.location.href = "http://localhost:5000/story-card-builder-view-1?circumstanceId=" + id + "&circumstanceName=" + name;
        }

        function generateAnimatedSearchPlaceholders() {
            const circumstanceSynonyms = [
                "cerita",
                "pov",
                "isihati",
                "emosi",
                "deepthoughts",
                "penghargaan",
                "peristiwa",
                "majorlifeevent",
                "mangsakeadaan",
                "specialcircumstances",
                "commonground",
                "sharedexperience",
                "rasasyukur",
                "pengakuan",
                "jauhtermenung",
                "situasi",
                "nasib",
                "masalah",
                "kekeliruan",
                "pendapat",
                "nikmat",
                "perasaan",
                "bakatterpendam",
                "yangcomplicated",
                "samalahkita",
                "confession",
                "luahan",
                "someonerelatable",
                "kejayaan",
                "ujian",
                "keluhan",
                "rungutan",
                "struggle",
            ];

            let currentIndex = 0;

            // Get the input element by its ID
            var inputElement = document.getElementById('searchCircumstanceInput');

            // Function to update the placeholder every 2 seconds
            function updatePlaceholder() {
                inputElement.placeholder = "Cari #" + circumstanceSynonyms[currentIndex];
                currentIndex = (currentIndex + 1) % circumstanceSynonyms.length; // Loop through the array
            }

            // Set interval to update placeholder every 2 seconds
            setInterval(updatePlaceholder, 2000);

        }

        function clickSearch() {
            // Get the input element by its ID
            var inputElement = document.getElementById('searchCircumstanceInput');

            // Trigger click on the input element when the page loads
            document.addEventListener('DOMContentLoaded', function () {
                inputElement.focus();
            });
        }
    </script>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <!-- Font Awesome CDN for the search icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Infant:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=DM+Serif+Text:ital@0;1&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
        rel="stylesheet">
    <title>SamalahKita</title>
</head>

<body>

    <!-- header -->
    <header class="header navbar navbar-expand-lg navbar-light bg-light">
        <a class="header-title navbar-brand" href="#">SamalahKita</a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="header-navbar collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#">Keselamatan dan Privasi</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Hubungi Kami</a>
                </li>
            </ul>
        </div>
    </header>

    <div class="content-2-story-builder">
        <p class="center-bottom-text">Warna biru sering dikaitkan dengan emosi sedih atau kekosongan,
            tapi biru juga merupakan simbol perasaan tenang, tertib dan stabil.
            <br> Pelbagai kajian telah dilakukan dengan psikologi warna dan impaknya
            terhadap kesihatan mental. <a
                style=" font-size: x-small; color: rgb(255, 255, 255); text-decoration: underline;"
                href="https://www.verywellmind.com/the-color-psychology-of-blue-2795815"> Baca lebih lanjut. </a>
        </p>
    </div>

    <div class="content-1-story-builder">
        <br>
        <div class="main-circumstance"><span>
                <h2>Kami memerlukan sedikit 'clue'.</h2>
            </span></div>
        <br>
        <div style="font-size: xx-small;" class="main-circumstance"><span> Setiap perjalanan ada permulaannya. Untuk
                pengalaman
                yang terbaik,
                sekurang-kurangnya satu latar belakang demografik anda diperlukan, seperti <b> umur atau jantina </b>.
                Ini bukan sahaja meningkatkan kepadanan situasi anda, malah ia membantu pencarian statistik dan memupuk
                sifat empati antara satu
                sama lain di SamalahKita. Segalanya tertakluk kepada perincian yang anda ingin kongsikan secara tanpa
                nama di sini.
                <br> Bayangkan anda bermain lego. Semakin banyak blok, semakin mudah difahami
                binaan tersebut. </span></div>
        <br>
        <div class="main-circumstance"><span>Got nothing to say yet? <a
                    style="color: black; text-decoration: underline;" href="google.com"> Baca Kad Cerita yang
                    berkaitan.</span>
            </a>
        </div>
        <hr style="height:0.5px; background-color: rgba(0, 0, 0, 0.5);">

    </div>
    <div class="story-builder-start-area">
        <div class="main-circumstance">
            <span th:text="${circumstanceName}"></span>
        </div>
        <br>
        <p style="text-align: center">❝<i> This is my story. </i>❞</p>
        <div id="cancelButton" class="white-button"><span style="font-size: small;">Batal</span></div>
        <div id="nextButton" style="border: 1px solid #00a2ff" class="white-button"><span
                style="font-size: small;">Seterusnya</span></div>
        <br><br>
        <p style="font-size: x-small; text-align: center">Dengan menekan Seterusnya, anda bersetuju dengan <a
                style="font-size: x-small; color: black; text-decoration: underline;" href="google.com"> Terma dan
                Syarat pengguna. </a></p>

    </div>

    <div>
        <br>

        <div class="side-circumstances-space" id="sideCircumstances">

        </div>
        <br>
    </div>

    <script th:inline="javascript">

        listenToNextButtonClick();
        listenToCancelButtonClick();

        function listenToNextButtonClick() {
            var circumstanceId = /*[[${circumstanceId}]]*/ '1';
            document.getElementById("nextButton").addEventListener("click", function (event) {
                window.location.href = "http://localhost:5000/story-card-builder-view-2?circumstanceId=" + circumstanceId;
            });
        }

        function listenToCancelButtonClick() {
            document.getElementById("cancelButton").addEventListener("click", function (event) {
                window.location.href = "http://localhost:5000";
            });
        }

        function addNewDiv() {
            // Create a new div element
            var newDiv = document.createElement('div');

            // Add a class to the new div for styling
            newDiv.className = 'main-circumstance';
            var newSpan = document.createElement('span');
            newSpan.textContent = "test";
            newDiv.appendChild(newSpan);

            // Append the new div as a child to the parent div
            document.getElementById('sideCircumstances').appendChild(newDiv);

            setInterval(addNewDiv, 1000);
        }
    </script>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

</body>

</html>